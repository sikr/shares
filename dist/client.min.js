var chartOptions={chart:{animation:!1},rangeSelector:{selected:4},title:{text:"Shares"},tooltip:{crosshairs:[!0,!1],followPointer:!1}},highchartsOptions={lang:{decimalPoint:",",thousandsSep:".",loading:"Daten werden geladen...",months:["Januar","Februar","M채rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortMonths:["Jan","Feb","M채r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],exportButtonTitle:"Exportieren",printButtonTitle:"Drucken",rangeSelectorFrom:"Von",rangeSelectorTo:"Bis",rangeSelectorZoom:"Zeitraum",downloadPNG:"Download als PNG-Bild",downloadJPEG:"Download als JPEG-Bild",downloadPDF:"Download als PDF-Dokument",downloadSVG:"Download als SVG-Bild",resetZoom:"Zoom zur체cksetzen",resetZoomTitle:"Zoom zur체cksetzen"}};$(function(){"use strict";{var a,b,c,d,e,f=io.connect("http://"+location.hostname+":7780"),g=0,h=["#c10001","#edff5b","#1a9391","#610c8c","#fc331c","#c7e000","#0eacbd","#980fb7","#ff8f00","#52e000","#00c4da","#d223fe","#ffd221","#00b22c","#4643bb","#b30347"],i=function(a){!0===a?d++:!1===a&&d--,0===d?c.hide():c.show()},j=function(a){!0===a?e.show():e.hide()},k=function(a,b){i(!0),$.getJSON("http://"+location.hostname+":7781/quotes?symbol="+a,function(a){b&&(b(a),i(!1))})},l=function(a,b){i(!0),$.getJSON("http://"+location.hostname+":7781/share?symbol="+a,function(a){b&&(b(a),i(!1))})},m=function(b){i(!0),$.getJSON("http://"+location.hostname+":7781/depots",function(c){a=c;for(var d in a)$("#depots").append("<option value="+a[d].id+">"+a[d].name+"</option>");b(),i(!1)})},n=function(a,c){i(!0),$.getJSON("http://"+location.hostname+":7781/positions?id="+a,function(a){b=a;var d=$('<ul class="positions-list"></ul');$("#positions").append(d);for(var e in b)d.append($('<li data-symbol="'+b[e].symbol+'">'+b[e].name+"</li>"));$("ul.positions-list li").click(function(a){if($(a.target).toggleClass("selected"),$(a.target).hasClass("selected")){var b=g++%16+1;$(a.target).addClass("selected-color-"+b),$(a.target).data("selected-color",b),k($(a.target).data("symbol"),function(c){l($(a.target).data("symbol"),function(a){var d=Highcharts.charts[0];console.log("color: "+b),d.addSeries({name:a[0].name,data:c,color:h[b-1]})})})}else $(a.target).removeClass("selected-color-"+$(a.target).data("selected-color")),l($(a.target).data("symbol"),function(a){var b,c=Highcharts.charts[0];for(b=0;b<c.series.length;b++)c.series[b].name===a[0].name&&c.series[b].remove()})}),c(),i(!1)})};!function(){var a=$("#container").highcharts();void 0!==a&&a.destroy(),$("#container").highcharts("StockChart",chartOptions),Highcharts.setOptions(highchartsOptions)}()}$("body").keydown(function(a){27==a.keyCode&&($("#settings").is(":visible")?$("#settings").hide():$("#settings").show())});{var o=(function(){d=0,c=$('<div class="loading"><i class="fa fa fa-refresh fa-spin fa-2x"></i></div>'),$("body").append(c),e=$('<div class="loading"><i class="fa fa fa-refresh fa-spin fa-2x"></i><br>Server unavailable</div>'),$("body").append(e),$("div.loading i").css("margin-top",parseInt($("body").css("height"),10)/2-parseInt($("div.loading i").css("height"))/2),$("#none").click(function(){var a=Highcharts.charts[0].yAxis[0];a.setCompare(null)}),$("#value").click(function(){var a=Highcharts.charts[0].yAxis[0];a.setCompare("value")}),$("#percent").click(function(){var a=Highcharts.charts[0].yAxis[0];a.setCompare("percent")})}(),function(){f.on("connect",function(){j(!1),console.log("connected...")}),f.on("connect_error",function(a){j(!0),console.log("connect error: "+JSON.stringify(a))}),f.on("error",function(a){console.log("error: "+JSON.stringify(a))}),f.on("disconnect",function(){j(!0),console.log("disconnected")})}(),function(){var a;$("#positions").empty();var b=Highcharts.charts[0],c=b.series.length;for(a=0;c>a;a++)b.series[0].remove();n($("#depots option:selected").attr("value"),function(){})});!function(){m(function(){n(0,function(){$('#depots option[value="1"]').attr("selected",!0),$("#depots").change(function(){o()})})})}()}});