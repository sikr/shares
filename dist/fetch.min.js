for(var http=require("http"),fs=require("fs"),util=require("util"),fetchYahooData=function(a,b){var c=b+"-01-01",d=b+"-12-31",e=util.format('select * from yahoo.finance.historicaldata where symbol in ("%s") and startDate = "%s" and endDate = "%s"',a,c,d),f="/v1/public/yql?q="+encodeURIComponent(e)+"&env=http://datatables.org/alltables.env&format=json",g={host:"query.yahooapis.com",path:f,method:"GET"};console.log("http://"+g.host+g.path),http.request(g,function(b){var d="";b.on("data",function(a){d+=a}),b.on("end",function(){var b=JSON.parse(d);fs.writeFile("../data/"+a+"_"+c.substr(0,4)+".json",JSON.stringify(b,null,"  "))})}).end()},symbol="",year="",i=0;i<process.argv.length;i++)"-y"==process.argv[i]?year=process.argv[++i]:"-s"==process.argv[i]&&(symbol=process.argv[++i]);symbol.length&&year.length&&fetchYahooData(symbol,year);